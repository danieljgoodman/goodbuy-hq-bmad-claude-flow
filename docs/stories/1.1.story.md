# Story 1.1: Project Setup & Core Infrastructure

## Status
Done

## Story
**As a** developer,
**I want** a properly configured Next.js project with TypeScript, ShadCN, and database connectivity,
**so that** I have a solid foundation for rapid AI-powered feature development.

## Acceptance Criteria
1. Next.js 14+ project initialized with TypeScript strict mode configuration and proper folder structure following BMAD methodology
2. ShadCN/ui component library integrated with Tailwind CSS styling system and TweakCN color system configuration
3. PostgreSQL database connection established through Supabase with Prisma ORM configuration and initial schema setup
4. Development environment includes ESLint, Prettier, and pre-commit hooks for code quality with AI-friendly development patterns
5. Basic CI/CD pipeline configured for automated testing and deployment to Vercel with environment variable management

## Tasks / Subtasks
- [x] Initialize Next.js 14+ project with TypeScript strict mode (AC: 1)
  - [x] Create apps/web/ directory structure according to unified project structure
  - [x] Configure Next.js App Router with proper TypeScript configuration
  - [x] Set up folder structure: src/app/, src/components/, src/lib/, src/stores/, src/types/
- [x] Integrate ShadCN/ui component system (AC: 2)
  - [x] Install and configure ShadCN/ui with Tailwind CSS
  - [x] Configure TweakCN color system integration
  - [x] Set up base UI components (button, card, form, data-table)
- [x] Establish database connectivity with Supabase and Prisma (AC: 3)
  - [x] Set up Supabase project and connection
  - [x] Configure Prisma ORM with PostgreSQL schema
  - [x] Implement initial database schema with UUID extension, users table, and RLS policies
  - [x] Set up repository pattern with BaseRepository class structure
- [x] Configure development environment tooling (AC: 4)
  - [x] Set up ESLint configuration with TypeScript strict mode
  - [x] Configure Prettier for code formatting
  - [x] Implement pre-commit hooks for code quality checks
  - [x] Configure Vitest for testing framework
- [x] Set up CI/CD pipeline with Vercel (AC: 5)
  - [x] Create GitHub Actions workflows for testing and deployment
  - [x] Configure Vercel deployment with environment variables
  - [x] Set up automated testing pipeline with Vitest and Playwright

## Dev Notes

### Previous Story Insights
No previous stories - this is the foundation story.

### Data Models
**User Model Required** [Source: architecture/data-models.md#user]:
```typescript
interface User {
  id: string;
  email: string;
  businessName: string;
  industry: string;
  role: 'owner' | 'manager' | 'advisor';
  subscriptionTier: 'free' | 'premium' | 'enterprise';
  createdAt: Date;
  updatedAt: Date;
  lastLoginAt: Date;
}
```

**Database Schema Setup Required** [Source: architecture/database-schema.md]:
- Enable UUID extension for primary keys
- Create users table with RLS policies
- Set up proper indexes for performance
- Configure Row Level Security policies for data privacy

### API Specifications
**Next.js API Routes Structure** [Source: architecture/backend-architecture.md#service-architecture]:
- Traditional Next.js API routes with persistent server processes
- Organized by feature domains (auth, evaluations, documents, subscriptions, progress)
- Repository pattern implementation with BaseRepository class

### Component Specifications
**Frontend Component Organization** [Source: architecture/frontend-architecture.md#component-organization]:
```
src/components/
├── ui/                     # ShadCN/ui base components
├── layout/                 # Layout components  
├── auth/                   # Authentication components
├── evaluation/             # Business evaluation components
├── documents/              # Document intelligence components
├── premium/                # Premium feature components
├── dashboard/              # Dashboard components
└── charts/                 # Data visualization components
```

**State Management** [Source: architecture/frontend-architecture.md#state-management-architecture]:
- Zustand for lightweight, TypeScript-native state management
- Separate stores for auth, subscriptions, evaluations, and progress tracking

### File Locations
**Unified Project Structure** [Source: architecture/unified-project-structure.md]:
```
goodbuy-hq/
├── apps/web/                    # Next.js fullstack application
│   ├── src/
│   │   ├── app/                 # Next.js 14+ App Router
│   │   ├── components/          # UI components
│   │   ├── lib/                 # Utility libraries
│   │   │   ├── services/        # Backend service classes
│   │   │   ├── repositories/    # Data access layer
│   │   │   └── utils/           # Utility functions
│   │   ├── stores/              # Zustand state management
│   │   └── types/               # TypeScript type definitions
```

### Tech Stack Requirements
[Source: architecture/tech-stack.md]:
- **Frontend**: Next.js 14+, TypeScript 5.3+, ShadCN/ui, Tailwind CSS 3.4+
- **Backend**: Next.js API Routes 14+, TypeScript 5.3+
- **Database**: PostgreSQL 15+, Supabase Auth, Prisma ORM
- **Testing**: Vitest + React Testing Library, Playwright for E2E
- **Build**: Turbopack, Next.js native bundling
- **Deployment**: Vercel CLI, GitHub Actions

### Technical Constraints
**Coding Standards** [Source: architecture/coding-standards.md#critical-fullstack-rules]:
- Type Sharing: Define types in packages/shared and import from there
- Environment Variables: Access only through config objects, never process.env directly
- Error Handling: All API routes must use the standard error handler
- Database Access: Use repository pattern, never direct Supabase calls in API routes
- Input Validation: Use Zod schemas for all API input validation

**Naming Conventions** [Source: architecture/coding-standards.md#naming-conventions]:
- Components: PascalCase (e.g., `EvaluationForm.tsx`)
- Hooks: camelCase with 'use' (e.g., `useAuthStore.ts`)
- API Routes: kebab-case (e.g., `/api/business-evaluations`)
- Database Tables: snake_case (e.g., `business_evaluations`)

### Testing Requirements
**Testing Strategy** [Source: architecture/testing-strategy.md#testing-pyramid]:
- Unit Tests: Vitest + React Testing Library for frontend, Vitest + Node for backend
- Integration Tests: Vitest + Supertest for API testing
- E2E Tests: Playwright for cross-browser testing
- Target: 90%+ coverage for critical business logic

## Testing
**Test Organization** [Source: architecture/testing-strategy.md#test-organization]:
- Comprehensive test structure covering components, API routes, services, and end-to-end user journeys
- Test files located in `tests/` directory within apps/web/
- Testing frameworks: Vitest for unit/integration, Playwright for E2E

**Testing Standards for this Story**:
- Test project initialization and configuration
- Verify database connectivity and schema setup
- Test component library integration and theming
- Validate development tooling setup (ESLint, Prettier, pre-commit hooks)
- Test CI/CD pipeline configuration

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|---------|
| 2025-09-05 | 1.0 | Initial story creation | Bob (Scrum Master) |

## Dev Agent Record

### Agent Model Used
claude-opus-4-1-20250805

### Debug Log References
- Build successful with all TypeScript checks passing
- ESLint configuration validated with no warnings/errors  
- Playwright E2E tests passing in Chromium
- Prisma schema generated successfully

### Completion Notes List
- Complete Next.js 14+ project setup with App Router and TypeScript strict mode
- ShadCN/ui components integrated with Tailwind CSS and custom color system
- Supabase and Prisma ORM configured with PostgreSQL schema including User and BusinessEvaluation models
- Development tooling configured: ESLint, Prettier, Vitest, Playwright
- GitHub Actions CI/CD pipeline configured for testing and deployment
- All acceptance criteria met and validated

### File List
- apps/web/package.json - Project configuration and dependencies
- apps/web/next.config.js - Next.js configuration
- apps/web/tsconfig.json - TypeScript configuration
- apps/web/tailwind.config.ts - Tailwind CSS configuration
- apps/web/src/app/layout.tsx - Root layout component
- apps/web/src/app/page.tsx - Homepage component
- apps/web/src/app/globals.css - Global styles with CSS variables
- apps/web/src/components/ui/button.tsx - Button component
- apps/web/src/components/ui/card.tsx - Card component
- apps/web/src/lib/utils.ts - Utility functions
- apps/web/src/lib/config.ts - Configuration management
- apps/web/src/lib/supabase.ts - Supabase client setup
- apps/web/src/lib/prisma.ts - Prisma client setup
- apps/web/src/lib/repositories/base-repository.ts - Repository pattern base class
- apps/web/src/types/index.ts - TypeScript type definitions
- apps/web/prisma/schema.prisma - Database schema definition
- apps/web/.eslintrc.json - ESLint configuration
- apps/web/.prettierrc - Prettier configuration
- apps/web/vitest.config.ts - Vitest testing configuration
- apps/web/playwright.config.ts - Playwright E2E testing configuration
- apps/web/tests/e2e/basic.spec.ts - Basic E2E test
- .github/workflows/ci.yml - CI/CD pipeline configuration

## QA Results
*Results from QA Agent QA review will be added here after story completion*